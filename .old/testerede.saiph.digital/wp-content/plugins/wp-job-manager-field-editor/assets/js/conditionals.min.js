window.jmfe_conditionals=window.jmfe_conditionals||{},function(a,b){a={initFired:!1,log:{obj:function(a){return JSON.parse(JSON.stringify(a))}},initCompleted:function(){a.initFired||a.chosen.queued.length>0||(b(document).trigger("felogic:init",a),a.initFired=!0)},data:{groups:jmfe_conditional_logic||{},meta_keys:jmfe_logic_meta_keys||{},config:jmfe_js_logic_config||{delay:500,group_types:{},case_sensitive:!1,default_hidden:!1,chosen_fields:!1,repeatables:!1,show_method:!1,hide_method:!1,custom_values:{}},active:{}},init:function(){a.initFired=!1,a.data.config.default_hidden&&b.each(a.data.config.default_hidden,function(b,c){a.chosen.is(c)?a.chosen.queue(c,"hide"):a.group.trigger.hide(c)}),b.each(a.data.meta_keys,function(c,d){var e=!1,f=b(".job-manager-form"),g=a.input.text.changed;d.type in a.input?("init"in a.input[d.type]?a.input[d.type].init(c,d,f):(g=a.input[d.type].changed,f.on("keyup","#"+c,a.debounce(g,a.data.config.delay)),f.on("change paste","#"+c,g),f.on("fedtchange:"+c,a.input.dtchanged)),"on_load"in a.input[d.type]&&(e=!0,a.input[d.type].on_load(c,d))):(f.on("keyup","#"+c,a.debounce(g,a.data.config.delay)),f.on("change paste","#"+c,g),f.on("fedtchange:"+c,a.input.dtchanged)),e||b("#"+c).trigger("change",{isPageLoad:!0})}),a.initCompleted()},check:{logic:function(b,c,d,e){var f=!1,g=a.get.logic(b,c,d);return"function"==typeof a.compare[g.compare]&&(f=a.compare[g.compare](e,g.value)),f},ands:function(c,d,e){var f=!0,g=a.get.ands(c,d);return g?(b.each(g,function(b,c){if(b===e)return!0;var d=a.get.meta_key.value(c.check);return"function"!=typeof a.compare[c.compare]||a.compare[c.compare](d,c.value)?void 0:(f=!1,!1)}),f):results},default_hidden:function(b){return a.data.config.default_hidden&&a.data.config.default_hidden.indexOf(b)>-1?!0:!1}},active:{fields:{},logic:{},states:{},restore:{check:function(){b.each(a.active.logic,function(c,d){return d?void b.each(d,function(b,c){return"failed"in c&&c.failed===!0?(a.utils.count(a.active.logic[c.group])>1?delete a.active.logic[c.group][b]:delete a.active.logic[c.group],void a.active.restore.fields(c)):!0}):!1})},fields:function(c){b.each(c.fields,function(b,d){return d in a.active.fields&&a.active.field.state.current(d,c)?(a.active.field.update(d,c),void(a.active.field.type.is_empty(d)&&delete a.active.fields[d])):!0})}},group:{success:function(b,c,d,e){d in a.active.logic||(a.active.logic[d]={}),e in a.active.logic[d]||(a.active.logic[d][e]={section:e,group:d,type:b,fields:c})},failed:function(c,d){if(!(c in a.active.logic&&d in a.active.logic[c]))return!1;var e=a.active.logic[c][d];e.failed=!0,b.each(e.fields,function(b,f){a.active.field.remove(f,e.type,c,d)})}},field:{update:function(c,d){var e=a.get.type.config(d.type);if("default"in e&&!a.active.field.type.get(c,d.type,!0)&&!a.active.field.type.get(c,e.opposite,!0))return a.group.trigger[e["default"]](c),!0;var f=a.get.state.previous(c);if(!f){if(!a.get.type.non_default(d.type,!0)){if(a.check.default_hidden(c))return!1;var g=a.get.type.opposite(d.type);a.group.trigger[g](c)}return!1}var h=a.active.fields[c];return b.each(f,function(b,f){return f.type!==d.type&&f.type!==e.opposite?!0:f.type in h&&f.group in h[f.type]&&f.section in h[f.type][f.group]?(a.active.fields[c].state.current=f,a.active.field.state.remove(c,f.section,f.group),f.type===e.opposite&&a.group.trigger[e.opposite](c),!1):void 0}),!0},state:{current:function(b,c){if(!(b in a.active.fields&&"state"in a.active.fields[b]&&"current"in a.active.fields[b].state&&a.active.fields[b].state.current!==!1))return!1;var d=a.active.fields[b].state.current;return d.group===c.group&&d.section===c.section&&d.type===c.type?!0:!1},previous:function(b,c){var d=a.get.state.previous(b,!0);return d&&d.group===c.group&&d.section===c.section&&d.type===c.type?!0:!1},remove:function(c,d,e){return a.get.state.previous(c)?(a.active.fields[c].state.previous=b.grep(a.active.fields[c].state.previous,function(a,b){return a&&a.section!==d&&a.group!==e}),!0):!1}},type:{is_empty:function(b){if(!(b in a.active.fields))return!0;var c=a.utils.count(a.active.fields[b]);return"state"in a.active.fields[b]&&1===c?!0:!("state"in a.active.fields[b])&&1>c?!0:!1},get:function(b,c,d){return b in a.active.fields&&c in a.active.fields[b]&&!(a.utils.count(a.active.fields[b][c])<1)?d&&"failed"in a.active.fields[b][c]&&a.active.fields[b][c].failed===!0?!1:a.active.fields[b][c]:!1}},add:function(b,c,d,e){var f=a.active.fields;c in f||(f[c]={}),"state"in f[c]||(f[c].state={current:!1,previous:[]});var g=a.get.state.current(c);g&&f[c].state.previous.push(g);var h={section:e,group:d,type:b};f[c].state.current=h,b in f[c]||(f[c][b]=[]),d in f[c][b]||(f[c][b][d]=[]);var i=a.utils.findIndexOfKeyValue("section",e,f[c][b][d]);0>i&&f[c][b][d].push(h)},remove:function(b,c,d,e){if(b in a.active.fields&&c in a.active.fields[b]&&d in a.active.fields[b][c]){var f=a.utils.findIndexOfKeyValue("section",e,a.active.fields[b][c][d]);f>-1&&(a.utils.count(a.active.fields[b][c][d])>1?a.active.fields[b][c][d].splice(f,1):delete a.active.fields[b][c][d],a.active.field.state.remove(b,e,d),a.utils.count(a.active.fields[b][c])<1&&delete a.active.fields[b][c])}}}},group:{section:{success:function(c,d,e,f,g){var h=a.get.group(d);a.active.group.success(h.type,h.fields,d,e),b.each(h.fields,function(b,c){a.active.field.add(h.type,c,d,e),a.group.trigger[h.type](c,g)})},failure:function(b,c,d){a.active.group.failed(c,d)}},trigger:{hide:function(c,d){var e=d&&"isPageLoad"in d&&d.isPageLoad===!0;if(e&&a.chosen.is(c))return void a.chosen.queue(c,"hide");var f=b("#"+c);f.length||(f=b('[name="'+c+'"]'));var g=b(".dynamic-"+c),h=b(".fieldset-"+c),i=b(".dynamic-fieldset-"+c);if(!h.hasClass("jmfe-fieldset-logic-hide")||!f.hasClass("jmfe-field-logic-hide")){h.removeClass("jmfe-fieldset-logic-show").addClass("jmfe-fieldset-logic-hide"),i.removeClass("jmfe-fieldset-logic-show").addClass("jmfe-fieldset-logic-hide"),f.removeClass("jmfe-field-logic-show").addClass("jmfe-field-logic-hide"),g.removeClass("jmfe-field-logic-show").addClass("jmfe-field-logic-hide");var j=f.hasClass("jmfe-field-logic-enabled")&&h.hasClass("jmfe-fieldset-logic-enabled");if(a.data.config.hide_method&&!e){var k=a.data.config.hide_method,l=k.duration?k.duration:400,m=k.easing?k.easing:"spring",n=k.method?k.method:"slideUp";h.velocity(n,l,m),i.velocity(n,l,m)}else h.hide(),i.hide();j||(f.prop("disabled",!0),g.prop("disabled",!0)),f.hasClass("jmfe-header-field")&&f.addClass("jmfe-logic-hide"),a.chosen.is(c)&&f.trigger("chosen:updated"),a.repeatables.is(c)&&a.repeatables.setHidden(c)}},show:function(c){var d=b("#"+c);d.length||(d=b('[name="'+c+'"]'));var e=b(".dynamic-"+c),f=b(".fieldset-"+c),g=b(".dynamic-fieldset-"+c);if(!f.hasClass("jmfe-fieldset-logic-show")||!d.hasClass("jmfe-field-logic-show")){f.removeClass("jmfe-fieldset-logic-hide").addClass("jmfe-fieldset-logic-show"),g.removeClass("jmfe-fieldset-logic-hide").addClass("jmfe-fieldset-logic-show"),d.removeClass("jmfe-field-logic-hide").addClass("jmfe-field-logic-show"),e.removeClass("jmfe-field-logic-hide").addClass("jmfe-field-logic-show");var h=d.hasClass("jmfe-field-logic-disabled")&&f.hasClass("jmfe-fieldset-logic-disabled");if(h||(d.prop("disabled",!1),e.prop("disabled",!1)),d.hasClass("jmfe-input-fptime")&&!h&&b(".fptime-"+c).prop("disabled",!1),d.hasClass("jmfe-input-fpdate")&&!h&&b(".fpdate-"+c).prop("disabled",!1),a.data.config.show_method){var i=a.data.config.show_method,j=i.duration?i.duration:400,k=i.easing?i.easing:"spring",l=i.method?i.method:"slideDown";f.velocity(l,j,k),g.velocity(l,j,k)}else f.show(),g.show();if(a.chosen.is(c)){var m=b("#"+c+"_chosen");if(m){var n=m.width();0===n&&m.css("width","100%")}d.trigger("chosen:updated"),e.trigger("chosen:updated")}d.hasClass("jmfe-header-field")&&d.removeClass("jmfe-logic-hide"),a.repeatables.is(c)&&a.repeatables.setVisible(c)}},disable:function(a){var c=b("#"+a);c.length||(c=b('[name="'+a+'"]'));var d=b(".dynamic-"+a),e=b(".fieldset-"+a),f=b(".dynamic-fieldset-"+a);e.removeClass("jmfe-fieldset-logic-enabled jmfe-fieldset-logic-disabled").addClass("jmfe-fieldset-logic-disabled"),f.removeClass("jmfe-fieldset-logic-enabled jmfe-fieldset-logic-disabled").addClass("jmfe-fieldset-logic-disabled"),c.removeClass("jmfe-field-logic-enabled jmfe-field-logic-disabled").addClass("jmfe-field-logic-disabled"),d.removeClass("jmfe-field-logic-enabled jmfe-field-logic-disabled").addClass("jmfe-field-logic-disabled"),c.prop("disabled",!0),d.prop("disabled",!0)},enable:function(a){var c=b("#"+a);c.length||(c=b('[name="'+a+'"]'));var d=b(".dynamic-"+a),e=b(".fieldset-"+a),f=b(".dynamic-fieldset-"+a);e.removeClass("jmfe-fieldset-logic-enabled jmfe-fieldset-logic-disabled").addClass("jmfe-fieldset-logic-enabled"),f.removeClass("jmfe-fieldset-logic-enabled jmfe-fieldset-logic-disabled").addClass("jmfe-fieldset-logic-enabled"),c.removeClass("jmfe-field-logic-enabled jmfe-field-logic-disabled").addClass("jmfe-field-logic-enabled"),d.removeClass("jmfe-field-logic-enabled jmfe-field-logic-disabled").addClass("jmfe-field-logic-enabled"),c.prop("disabled",!1)}}},repeatables:{is:function(b){return a.data.config.repeatables&&a.data.config.repeatables.indexOf(b)>-1?!0:!1},setHidden:function(a){b("#"+a+"-is-visible").val("no")},setVisible:function(a){b("#"+a+"-is-visible").val("yes")}},chosen:{queued:[],addQueued:function(b){a.chosen.queued.push(b)},removeQueued:function(b){var c=a.chosen.queued.indexOf(b);-1!==c&&a.chosen.queued.splice(c,1),a.initCompleted()},is:function(b){return a.data.config.chosen_fields&&a.data.config.chosen_fields.indexOf(b)>-1?!0:!1},queue:function(c,d){var e=b("#"+c).data("chosen");if("undefined"===e)a.chosen.addQueued(c),b("#"+c).on("chosen:ready",function(c,e){var f=b(this).prop("id");a.group.trigger[d](f),a.chosen.removeQueued(f)});else{b("#"+c+"_chosen");a.group.trigger[d](c)}}},input:{text:{changed:function(c,d){var e=b(this).val();a.input.changed(e,b(this).prop("id"),d)}},custom_value:{on_load:function(){},init:function(b,c,d){a.input.changed(a.get.custom_field.value(b),b,{isPageLoad:!0})},value:function(b,c){return a.get.custom_field.value(c)}},checkbox:{changed:function(c,d){var e="0";b(this).is(":checked")&&(e="1"),a.input.changed(e,b(this).prop("id"),d)},value:function(a,b){var c="0";return a.is(":checked")&&(c="1"),c}},term_checklist:{on_load:function(a,c){b(".job-manager-term-checklist-"+a+" :input").each(function(){b(this).is(":checked")&&b(this).trigger("change",{isPageLoad:!0})})},init:function(b,c,d){d.on("change",".job-manager-term-checklist-"+b+" :input",a.input.term_checklist.changed)},changed:function(c,d){var e=b(this).closest(".job-manager-term-checklist").data("meta-key"),f=a.input.term_checklist.value(!1,e);a.input.changed(f,e,d)},value:function(a,c){var d=b(".job-manager-term-checklist-"+c).data("taxonomy"),e=[];return b('[name="tax_input['+d+'][]"]:checked:enabled').each(function(){e.push(b(this).val())}),e}},checklist:{on_load:function(a,c){b("input[type=checkbox].jmfe-checklist-"+a).each(function(){b(this).is(":checked")&&b(this).trigger("change",{isPageLoad:!0})})},init:function(b,c,d){d.on("change","input[type=checkbox].jmfe-checklist-"+b,a.input.checklist.changed),d.on("fedtchange:"+b,a.input.dtchanged)},changed:function(c,d){var e=b(this).closest(".jmfe-checklist-wrapper").data("meta-key"),f=a.input.checklist.value(!1,e);a.input.changed(f,e,d)},value:function(a,c){var d=[];return b('[name="'+c+'[]"]:checked:enabled').each(function(){d.push(b(this).val())}),d}},term_multiselect:{init:function(b,c,d){d.on("change","#"+b,a.input.text.changed),d.on("fedtchange:"+b,a.input.dtchanged)},value:function(a,c){var d=[];return b('[name="'+c+'[]"]').each(function(){var a=b(this).val();a&&""!==a&&d.push(a)}),d}},term_select:{init:function(b,c,d){d.on("change","#"+b,a.input.text.changed),d.on("fedtchange:"+b,a.input.dtchanged)},value:function(a,c){var d=[],e=b('[name="'+c+'[]"]');return e.length||(e=b('[name="'+c+'"]')),e.each(function(){var a=b(this).val();a&&""!==a&&d.push(a)}),d}},radio:{on_load:function(a,c){b(".radio-"+a).each(function(){b(this).is(":checked")&&b(this).trigger("change",{isPageLoad:!0})})},init:function(c,d,e){e.on("change",".radio-"+c,a.input.radio.changed),b(".jmfe-clear-radio-"+c).click(function(){a.input.changed("",b(this).data("meta_key"))})},changed:function(c,d){var e=b(this).val();a.input.changed(e,b(this).prop("name"),d)},value:function(a,c){var d=b('[name="'+c+'"]:checked');return d?d.val():!1}},wp_editor:{initMetaKeys:[],addEditor:!1,on_load:function(){},init:function(b,c,d){a.input.wp_editor.addEditor||(window.tinymce.on("AddEditor",a.input.wp_editor.onAdd),a.input.wp_editor.addEditor=!0,window.tinymce.get(b)&&a.input.wp_editor.onAdd({editor:window.tinymce.get(b)}))},onAdd:function(b){!a.get.meta_key.logic(b.editor.id)||a.input.wp_editor.initMetaKeys.indexOf(b.editor.id)>-1||(a.input.wp_editor.initMetaKeys.push(b.editor.id),b.editor.on("keyup execcommand paste",a.debounce(a.input.wp_editor.keyup,a.data.config.delay)),b.editor.on("init",a.input.wp_editor.firstInit))},firstInit:function(b){a.input.wp_editor.keyup(b,{isPageLoad:!0},this)},keyup:function(b,c,d){d||(d=this);var e=d.getContent({format:"text"});"\n"===e&&(e=""),a.input.changed(e,d.id,c)},changed:function(b,c){var d=this.getContent({format:"text"});"\n"===d&&(d=""),a.input.changed(d,this.id,c)},value:function(a,b){var c=window.tinymce.get(b);if(c&&"getContent"in c){var d=c.getContent({format:"text"});return"\n"===d&&(d=""),d}return!1}},dtchanged:function(b,c){a.input.changed(c.values,c.meta_key,c)},changed:function(c,d,e){null===c&&(c=""),b.each(a.get.meta_key.logic(d),function(b,f){a.check.logic(f.group,f.section,f.row,c)&&a.check.ands(f.group,f.section,f.row)?a.group.section.success(d,f.group,f.section,f.row,e):a.group.section.failure(d,f.group,f.section)}),a.active.restore.check()}},get:{custom_field:{value:function(b){return b in a.data.config.custom_values&&"value"in a.data.config.custom_values[b]?a.data.config.custom_values[b].value:!1}},state:{current:function(b){return b in a.active.fields&&"state"in a.active.fields[b]&&"current"in a.active.fields[b].state&&a.active.fields[b].state.current!==!1?a.active.fields[b].state.current:!1},previous:function(b,c){if(!(b in a.active.fields&&"state"in a.active.fields[b]&&"previous"in a.active.fields[b].state))return!1;if(a.active.fields[b].state.previous===!1)return!1;if(!(a.active.fields[b].state.previous instanceof Array))return!1;if(a.utils.count(a.active.fields[b].state.previous)<1)return!1;var d=a.active.fields[b].state.previous.slice().reverse();return c?d[0]:d}},ands:function(b,c){var d=a.get.section(b,c);return d},logic:function(b,c,d){var e=a.data.groups[b].logic[c][d];return e},section:function(b,c){var c=a.data.groups[b].logic[c];return c},meta_key:{config:function(b){return b in a.data.meta_keys?a.data.meta_keys[b]:!1},logic:function(b){return b in a.data.meta_keys&&"logic"in a.data.meta_keys[b]?a.data.meta_keys[b].logic:!1},value:function(c){var d=!1,e=a.get.meta_key.config(c),f=b("#"+c);return e.type in a.input&&"value"in a.input[e.type]?d=a.input[e.type].value(f,c):f instanceof jQuery&&(d=f.val()),d},type:function(b){var c=a.get.meta_key.config(b);return c&&c.type?c.type:!1}},group:function(b){return b in a.data.groups?a.data.groups[b]:!1},type:{opposite:function(c){var d=!1;return b.each(a.data.config.group_types,function(a,b){return"default"in b&&b["default"]===c?(d=a,!1):void 0}),d},non_default:function(b,c){return b in a.data.config.group_types&&"default"in a.data.config.group_types[b]?c?a.data.config.group_types[b]["default"]:a.data.config.group_types[b]:!1},config:function(b){return b in a.data.config.group_types?a.data.config.group_types[b]:!1}}},compare:{is:function(b,c){return b=a.utils.lowercase(b),c=a.utils.lowercase(c),b instanceof Array?1===b.length&&b[0]===c:b==c},is_not:function(b,c){return b=a.utils.lowercase(b),c=a.utils.lowercase(c),b instanceof Array?1===b.length&&b[0]!==c:b!==c},greater_than:function(b,c){return b=a.utils.lowercase(b),c=a.utils.lowercase(c),b instanceof Array&&(b=b.length),b>c},less_than:function(a,b){return a instanceof Array&&(a=a.length),b>a},starts_with:function(b,c){return b=a.utils.lowercase(b),c=a.utils.lowercase(c),b instanceof Array?!1:0===b.lastIndexOf(c,0)},starts_with_not:function(b,c){return b=a.utils.lowercase(b),c=a.utils.lowercase(c),b instanceof Array?!1:0!==b.lastIndexOf(c,0)},ends_with:function(b,c){return b=a.utils.lowercase(b),c=a.utils.lowercase(c),b instanceof Array?!1:b.lastIndexOf(c)===b.length-c.length},ends_with_not:function(b,c){return b=a.utils.lowercase(b),c=a.utils.lowercase(c),b instanceof Array?!1:b.lastIndexOf(c)!==b.length-c.length},contains:function(b,c){return b=a.utils.lowercase(b),c=a.utils.lowercase(c),b?-1!==b.indexOf(c):!1},contains_not:function(b,c){return b=a.utils.lowercase(b),c=a.utils.lowercase(c),b?-1===b.indexOf(c):!0}},utils:{lowercase:function(c){if("undefined"==typeof c)return!1;if(a.data.config.case_sensitive)return c;if(c instanceof Array){var d=[];return b.each(c,function(a,b){"string"==typeof b&&(b=b.toLowerCase()),d[a]=b}),d}return"string"==typeof c&&(c=c.toLowerCase()),c},count:function(a){var b=Object.keys(a),c=b?b.length:0;return c},findIndexOfKeyValue:function(a,c,d){var e=-1;return d instanceof Array&&b.each(d,function(b,d){return d&&a in d&&d[a]==c?(e=b,!1):void 0}),e}},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}},b(document).ready(a.init)}(jmfe_conditionals,jQuery);