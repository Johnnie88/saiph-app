jQuery(document).ready((function(a){var n=[];a(".company_listings").on("update_results",(function(e,i,o){var t,s=a(this),r=a(".company_filters"),d=a(".showing_companies"),c=s.find(".company_listings"),l=s.data("per_page"),p=s.data("orderby"),g=s.data("order"),_=s.data("featured"),m=s.data("post_status"),u=a("div.company_listings").index(this),h=a(".listing-loader"),y=s.data("company_layout"),f=s.data("company_version");if(!(u<0)){n[u]&&n[u].abort(),o?(a(".load_more_companies",s).addClass("loading"),a(h).fadeIn()):(a(c).addClass("loading"),a(h).fadeIn(),a(".company, .no_companies_found",c).css("visibility","hidden"));var v=r.find(':input[name^="search_categories"]').map((function(){return a(this).val()})).get(),w="",k="",b=r.find(':input[name="search_keywords"]'),x=r.find(':input[name="search_location"]');b.val()!==b.attr("placeholder")&&(w=b.val()),x.val()!==x.attr("placeholder")&&(k=x.val()),t={action:"cariera_get_companies",search_keywords:w,search_location:k,search_categories:v,filter_post_status:m,per_page:l,orderby:p,order:g,page:i,featured:_,show_pagination:s.data("show_pagination"),form_data:r.serialize(),company_layout:y,company_version:f},n[u]=a.ajax({type:"POST",url:cariera_company_ajax_filters.ajax_url,data:t,success:function(n){if(n)try{n.showing?a(d).show().html("").append("<span>"+n.showing+"</span>"+n.showing_links):a(d).hide(),n.html&&(o?a(c).append(n.html):a(c).html(n.html)),1==s.data("show_pagination")?(s.find(".company-manager-pagination").remove(),n.pagination&&s.append(n.pagination)):(n.found_companies&&n.max_num_pages!==i?a(".load_more_companies",s).show().data("page",i):a(".load_more_companies",s).hide(),a(".load_more_companies",s).removeClass("loading"),a("li.company",c).css("visibility","visible")),a(c).removeClass("loading"),a(h).fadeOut(),s.triggerHandler("updated_results",n)}catch(a){window.console&&window.console.log(a)}},error:function(a,n,e){window.console&&"abort"!==n&&window.console.log(n+": "+e)},statusCode:{404:function(){window.console&&window.console.log("Error 404: Ajax Endpoint cannot be reached. Go to Settings > Permalinks and save to resolve.")}}})}})),a("#search_keywords, #search_location, #search_categories").change((function(){a("div.company_listings").triggerHandler("update_results",[1,!1])})).change().on("keyup",(function(n){13===n.which&&a(this).trigger("change")})),a(".company_filters").on("click",".reset",(function(){var n=a("div.company_listings"),e=a(this).closest("form");return e.find(':input[name="search_keywords"]').not(':input[type="hidden"]').val(""),e.find(':input[name="search_location"]').not(':input[type="hidden"]').val(""),e.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val(0).trigger("change.select2"),n.triggerHandler("reset"),n.triggerHandler("update_results",[1,!1]),!1})),a(".load_more_companies").click((function(){var n=a(this).closest("div.company_listings"),e=a(this).data("page");return e=e?parseInt(e):1,a(this).data("page",e+1),n.triggerHandler("update_results",[e+1,!0]),!1})),a("div.company_listings").on("click",".company-manager-pagination a",(function(){var n=a("div.company_listings"),e=a(this).data("page");return n.triggerHandler("update_results",[e,!1]),a("body, html").animate({scrollTop:n.offset().top},600),!1}))}));