var $j=jQuery,jmfe={values:{},locale:{},query_vars:[],config:{fields:{all:["meta_key","type","taxonomy","options","label","description","placeholder","priority","required","default","output","output_multiple","output_as","output_caption","output_classes","output_show_label","output_disable_multi_label_wrap","output_oembed_width","output_oembed_height","output_check_true","output_check_false","output_priority","populate_from_get","populate_enable","populate_meta_key","populate_save","populate_save_as","populate_default","output_video_allowdl","output_video_poster","output_video_height","output_video_width","packages_require","packages_show","multiple","ajax","admin_only","maxlength","image_link","size","min","max","step","pattern","title","prepend","append","output_full_wrap","output_fw_atts","output_vw_atts","output_lw_atts","output_enable_fw","output_value_wrap","output_label_wrap","max_uploads","hide_in_admin","max_selected","picker_mode","picker_min_date","picker_max_date","picker_increment","max_upload_size","label_over_value","max_upload_width","max_upload_height","output_loop","output_autoplay","output_preload","tax_show_child","tax_exclude_terms","output_csv","show_in_rest"],hidden:["options","taxonomy","default","multiple","maxlength","ajax","size","min","max","step","pattern","title","prepend","append","max_uploads","hide_in_admin","max_selected","picker_mode","picker_min_date","picker_max_date","picker_increment","max_upload_size","label_over_value","max_upload_width","max_upload_height","tax_show_child","tax_exclude_terms","output_csv"],output:["output","output_as","output_multiple","output_caption","output_classes","output_show_label","output_oembed_height","output_oembed_width","output_check_true","output_check_false","output_priority","image_link","output_full_wrap","output_fw_atts","output_vw_atts","output_lw_atts","output_enable_fw","output_value_wrap","output_disable_multi_label_wrap","output_enable_vw","output_label_wrap","output_video_allowdl","output_video_poster","output_video_height","output_video_width","output_preload","output_autoplay","output_loop"],populate:["populate_enable","populate_meta_key","populate_save","populate_default","populate_save_as","populate_from_get"],required:["meta_key","type"],noSpaces:["meta_key","taxonomy","min","max","step","maxlength","size","output_full_wrap","output_value_wrap","output_label_wrap","max_uploads"],onlyNum:["min","max","step","priority"],taxonomies:["job_type","job_category","resume_category","resume_skills"],checkboxes:["output_enable_fw","output_enable_vw","required","admin_only","ajax","multiple","output_show_label","populate_from_get","populate_enable","populate_save","option_default","option_disabled","output_video_allowdl","packages_require","image_link","hide_in_admin","label_over_value","output_autoplay","output_loop","tax_show_child","output_csv","output_disable_multi_label_wrap","show_in_rest"]},tabs:{all:["config","output","populate","options","packages","advanced"],hidden:["options","output"],custom:["output"]},popover:{hide:["options","meta_key","label","description","placeholder","priority","output","output_as","output_multiple","output_show_label","output_priority","origin","post_id"]}},callbacks:{}};jmfe.build={checkbox:function(){jmfe.config.checkbox=jmfe.phpconf.checkbox},meta_keys:function(){jmfe.config.meta_keys=jmfe.phpconf.meta_keys},outputs:function(){jmfe.config.outputs=jmfe.phpconf.outputs},types:function(){jmfe.config.types=jmfe.phpconf.types},query_vars:function(){jmfe.query_vars=jmfe.phpconf.query_vars}},jmfe.ucfirst=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},jmfe.isFileAPIAvailable=function(){return window.File&&window.FileReader&&window.FileList&&window.Blob?!0:(document.writeln("The HTML5 APIs used in this form are only available in the following browsers:<br />"),document.writeln(" - Google Chrome: 13.0 or later<br />"),document.writeln(" - Mozilla Firefox: 6.0 or later<br />"),document.writeln(" - Internet Explorer: Not supported (partial support expected in 10.0)<br />"),document.writeln(" - Safari: Not supported<br />"),document.writeln(" - Opera: Not supported"),!1)},jmfe.__query=function(a,b){for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==b)return e[1]}return!1},jQuery(function(a){jmfelocale&&(jmfe.locale=jmfelocale),jmfephpconf&&(jmfe.phpconf=jmfephpconf),jmfe.build.types(),jmfe.build.meta_keys(),jmfe.build.outputs(),jmfe.build.checkbox(),jmfe.build.query_vars(),jmfe.callbacks.page(a),jmfe.callbacks.list(a),jmfe.callbacks.settings(a);var b=a("#jmfe-listtype").val(),c=["resume_fields","job","company","resume","company_fields"];-1==a.inArray(b,c)&&(jmfe.table.alert.show("updated","You have permissions to view these fields.  They are currently READ ONLY and you CAN NOT edit them yet.  Functionality to edit these fields will be added in a future release."),a("#jmfe-list-wrap").click(function(a){a.preventDefault()}).find("*").off())}),jmfe.callbacks.list=function(a){a(" .jmfe-action-link ").click(function(){jmfe.row=a(this).closest("tr"),a(".jmfe-meta_key-wrap").popover("hide")}),a(".jmfe-status-icons").hover(function(){a(this).popover("toggle")}),a(" #add-new-field ").click(function(){jmfe.modal["new"]()}),a(" .jmfe-action-edit ").click(function(){jmfe.modal.edit()}),a(" .jmfe-action-delete ").click(function(){jmfe.modal["delete"]()}),a(" .jmfe-action-view ").click(function(){jmfe.modal.view()}),a(" .jmfe-options-btn-view ").click(function(){a(this).closest("tr").children("td.column-meta_key").find("span.view a").click()}),a(" .jmfe-action-disable ").click(function(){var b=a(this).data("action");jmfe.modal.disable(b)}),a(".jmfe-list-filter").click(function(b){var c=a(this).data("filter");b.preventDefault(),jmfe.table.list.filter(c)}),jmfe.table.cache.table(),a(".jmfe-meta_key-wrap").each(function(){var b=a(this).closest("tr");if(b.data()){var c="<table>";a.each(b.data(),function(b,d){a.inArray(b,jmfe.config.popover.hide)>-1||(c=c+"<tr><td><strong>"+b+':</strong></td><td class="jmfe-qv-'+b+'-data">'+d+"</td></tr>")}),c+="</table>",a(this).data("title",b.data("meta_key")),a(this).data("content",c)}}).popover({container:"#wpwrap",animation:!0,html:!0,viewport:"#jmfe-popover-viewport",placement:"left auto",trigger:"hover"}),a(".tablenav-pages a, .manage-column.sortable a, .manage-column.sorted a").on("click",function(a){a.preventDefault();var b=this.search.substring(1);jmfe.table.list.filter(null,b)}),a("thead, tfoot").find(".check-column :checkbox").on("click.wp-toggle-checkboxes",function(b){var c=a(this),d=c.closest("table"),e=c.prop("checked"),f=b.shiftKey||c.data("wp-toggle");d.children("tbody").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return a(this).is(":hidden")?!1:f?!a(this).prop("checked"):e?!0:!1}),d.children("thead,  tfoot").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return f?!1:e?!0:!1})}),a(".bulkactions submit").click(function(a){a.preventDefault()}),a("#current-page-selector").bind("keydown","return",function(b){b.preventDefault();var c={paged:parseInt(a(this).val())||"1",order:a("input[name=order]").val()||"asc",orderby:a("input[name=orderby]").val()||"priority"};jmfe.table.list.filter(null,null,c)})},jmfe.callbacks.page=function(a){var b=a("body"),c=a(".jmfe-settings-config-content");a(".jmfe-tab").click(function(){var b=a(this).data("tabgroup");jmfe.modal.tabs.show(b)}),a(" #jmfe-save-field ").click(function(){jmfe.modal.fields.check()&&jmfe.modal.save()}),a("#jmfe-modal-field_type-tr").on("change","#field_type",function(){var b=a(this).val();"none"!=a(this).val()?(jmfe.modal.alert.hide(),a(this).removeClass("jmfe-field-invalid")):a(this).addClass("jmfe-field-invalid"),jmfe.modal.type.changed(b)}),a("#jmfe-modal-field_output-tr").on("change","#field_output",function(){var b=a(this).val();jmfe.modal.fields.output.change(b)}),a("#jmfe-modal-field_output_as-tr").on("change","#field_output_as",function(){var b=a(this).val();jmfe.modal.fields.output.as.change(b)}),c.on("input","#field_meta_key",function(){var b=a(this).val(),c=b.indexOf(" ")>=0,d=jmfe.values.modal_action;0===b.length?(jmfe.modal.buttons.enable.primary(),jmfe.modal.alert.hide(),a(this).removeClass("jmfe-field-invalid")):c?(jmfe.modal.alert.show("danger",jmfe.locale.meta_key_no_spaces,"#field_meta_key"),a(this).addClass("jmfe-field-invalid"),jmfe.modal.buttons.disable.primary()):0==/^[a-z0-9_]*$/.test(b)?(jmfe.modal.alert.show("danger",jmfe.locale.meta_key_chars,"#field_meta_key"),a(this).addClass("jmfe-field-invalid"),jmfe.modal.buttons.disable.primary()):jmfe.query_vars.indexOf(b)>-1?(jmfe.modal.alert.show("danger",jmfe.locale.meta_key_query_var,"#field_meta_key"),a(this).addClass("jmfe-field-invalid"),jmfe.modal.buttons.disable.primary()):"edit"===d&&b!=jmfe.values.meta_key?(jmfe.modal.alert.show("warning",jmfe.locale.edit_change_meta_key,"#field_meta_key"),a(this).addClass("jmfe-field-invalid"),jmfe.modal.buttons.enable.primary()):(jmfe.modal.buttons.enable.primary(),jmfe.modal.alert.hide(),a(this).removeClass("jmfe-field-invalid"))}),a("#jmfe-modal-form").on("change",":checkbox",function(b){var c=a(this).prop("name");c&&jmfe.modal.checkboxes.check(c)}),a("#jmfe-output-form").on("change",":checkbox",function(b){var c=a(this).prop("name");c&&jmfe.modal.checkboxes.output_as.check(c)}),b.on("input","[name*='options[option_value]']",function(){var b=a(this).val(),c=b.indexOf("~")>=0,d=b.indexOf("*")>=0,e=a(this).prop("id");c||d?(jmfe.modal.alert.show("danger",jmfe.locale.options_badchars,"#"+e),a(this).addClass("jmfe-field-invalid")):(jmfe.modal.alert.hide(),a(this).removeClass("jmfe-field-invalid"))}),a(".jmfe-modal-close").click(function(){jmfe.modal.hide()}),a(".jmfe-table-alert .notice-dismiss").click(function(){jmfe.table.alert.hide()}),a(document).bind("keydown","esc",function(a){jmfe.modal.esckey(a)}),a(document).bind("keydown","return",function(a){jmfe.modal.returnkey(a)});var d=a(".jmfe-settings-config-content input");d.bind("keydown","return",function(a){jmfe.modal.returnkey(a)}),d.bind("keydown","esc",function(a){jmfe.modal.esckey(a)}),a("#meta_key-hide ").prop("disabled","disabled"),b.on("click",".jmfe-field-add-group-row-button",function(){var b=a(this),c=jmfe.modal.fields.options.template(),d=(c.rowid,c.template);if(b.data("field")){var e=b.data("field").split("-");d=d.replace(/\_\_i\_\_/g,e[e.length-2])}d=d.replace(/\_\_count\_\_/g,b.parent().parent().find(".options-groupitems").length),$j("#jmfe-options-form").append(d),jmfe.modal.fields.options.type(),jmfe.modal.fields.options.sortCreate()}),b.on("click","#jmfe-import-csv",function(){if(!jmfe.isFileAPIAvailable())return alert("Your browser does NOT support HTML5 File API.  Please use Chrome 13.0+ or FireFox 6.0 to import from CSV file."),!1;var b=document.getElementById("jmfe-options-csv");if(!b)return void alert("You MUST select a CSV file to import!");if(!b.files)return void alert("This browser doesn't seem to support the `files` property of file inputs.");if(!b.files[0])return void alert("Please select a file before clicking 'Import CSV'");if(confirm("Are you SURE you want to import the CSV file as options? This will REPLACE ALL EXISTING OPTIONS!")){var c=b.files[0],d=new FileReader;d.readAsText(c),d.onload=function(b){var c=b.target.result,d=a.csv.toArrays(c);if(!d||d.length<1)return void alert("There was an error parsing the CSV file! Please check that the CSV is a valid file and try again.");var e,f="";for(e=0;e<d.length;e++)if(d[e].length>0){var g=d[e].length>1?d[e][1]:d[e][0];f+=d[e][0]+"||"+g,e!==d.length-1&&(f+=",")}""===f?alert("There was an error parsing the CSV file! Verify it is a valid CSV file and try again."):(jmfe.modal.fields.options.sortDestroy(),jmfe.modal.fields.options.load(f))}}}),b.on("click","#jmfe-clear-options",function(){confirm("ARE YOU SURE you want to clear ALL options?  This can NOT be undone!")&&(jmfe.modal.fields.options.sortDestroy(),a("#jmfe-options-form table").remove())}),b.on("click",".jmfe-field-remove-group-row",function(){a(this).closest("table").remove(),jmfe.modal.fields.options.reIndex()}),b.on("click","#jmfe-tab-options-group input[name*='options[option_default]']",function(b){var c=a("#field_type").val();"multiselect"!==c&&a(this).is(":checked")&&(a(".jmfe-option-default").prop("checked",!1),a(this).prop("checked",!0))})},jmfe.callbacks.settings=function(a){a("#jmfe_remove_all").click(function(a){return window.confirm(jmfe.locale.remove_all_confirm)?!0:!1}),a("#jmfe_enable_optional_label").on("click",function(b){a(this).is(":checked")&&a("#jmfe_enable_required_label").prop("checked",!1)}),a("#jmfe_enable_required_label").on("click",function(b){a(this).is(":checked")&&a("#jmfe_enable_optional_label").prop("checked",!1)}),a("#jmfe_enable_resume_optional_label").on("click",function(b){a(this).is(":checked")&&a("#jmfe_enable_resume_required_label").prop("checked",!1)}),a("#jmfe_enable_resume_required_label").on("click",function(b){a(this).is(":checked")&&a("#jmfe_enable_resume_optional_label").prop("checked",!1)})},jmfe.table={show:function(){$j("#jmfe-form-wrap").show()},hide:function(){$j("#jmfe-form-wrap").hide()},loader:{show:function(){jmfe.table.hide(),$j("#jmfe-list-spin").show()},hide:function(){$j("#jmfe-list-spin").hide(),jmfe.table.show()}},cache:{table:function(){jmfe.table.field_group=$j("#jmfe-listtype").val(),jmfe.table.field_group_parent=$j("#jmfe-listtype-parent").val(),jmfe.table.filter=$j("#jmfe-listfilter").val()},values:function(a){a||(a=jmfe.row),a.length&&$j.each(a.data(),function(a,b){jmfe.values[a]=b})}},flash:function(a,b){var c=$j(a);if(c){var d=c.offset().top-$j(window).height()/2;$j("html,body").animate({scrollTop:d});var e="jmfe-alert-updated";"error"==b&&(e="jmfe-alert-error"),c.addClass(e),setTimeout(function(){c.removeClass(e)},2e3)}},alert:{show:function(a,b){var c;"error"==a&&(c='<strong class="jmfe-alert-pre"><i class="fa fa-exclamation-triangle"></i> '+jmfe.locale.error+"!</strong> "),"updated"==a&&(c='<strong class="jmfe-alert-pre"><i class="fa fa-check"></i> '+jmfe.locale.success+"!</strong> "),$j(".jmfe-table-alert").removeClass("error").removeClass("updated").addClass(a),$j(".jmfe-table-alert-content").html(c+b),$j(".jmfe-table-alert").show()},hide:function(){$j(".jmfe-table-alert").hide()}},list:{}},jmfe.modal={show:function(){$j("#jmfe-modal-panel").show()},hide:function(){$j("#jmfe-modal-panel").hide()},returnkey:function(a){jmfe.modal.visible()&&jmfe.modal.fields.check()&&(a.preventDefault(),jmfe.modal.save())},esckey:function(a){a.preventDefault(),jmfe.modal.hide()},visible:function(){return"none"==$j("#jmfe-modal-panel").css("display")?!1:!0},reset:function(){jmfe.modal.loader.hide(),jmfe.modal.buttons.reset(),jmfe.modal.fields.clear(),jmfe.modal.fields.reset(),jmfe.modal.alert.hide(),jmfe.modal.confirm.clear_alert(),jmfe.modal.confirm.hide(),jmfe.modal.tabs.reset(),jmfe.modal.form.show()},form:{show:function(){$j(".jmfe-modal-content").height("auto").width("auto"),$j(".jmfe-modal-body").show()},hide:function(){$j(".jmfe-modal-body").hide()}},confirm:{show:function(){$j(".jmfe-modal-content").height("35%").width("35%"),jmfe.modal.buttons.hero.enable(),jmfe.modal.buttons.text.primary(jmfe.ucfirst(jmfe.locale.yes)),jmfe.modal.buttons.text.secondary(jmfe.ucfirst(jmfe.locale.no)),jmfe.modal.form.hide(),$j(".jmfe-modal-other").show()},hide:function(){jmfe.modal.buttons.hero.disable(),jmfe.modal.buttons.text.secondary(jmfe.locale.cancel),$j(".jmfe-modal-other").hide()},content:function(a){$j(".jmfe-other-body").html(a)},clear_alert:function(){$j(".jmfe-other").removeClass("jmfe-other-alert").removeClass("alert").removeClass("alert-danger")},enable_alert:function(){this.clear_alert(),$j(".jmfe-other").addClass("alert alert-danger jmfe-other-alert")}},alert:{hide:function(){$j(".jmfe-alert").hide()},show:function(a,b,c){if($j(".jmfe-alert").removeClass("alert-danger").removeClass("alert-success").removeClass("alert-info").removeClass("alert-warning").addClass("alert-"+a),$j(".jmfe-alert-content").html(b),c){var d=$j(".jmfe-settings-config-content "+c).closest(".group").data("tabgroup");$j("#jmfe-tab-"+d).click(),$j(".jmfe-settings-config-content "+c).addClass("jmfe-field-invalid").focus()}$j(".jmfe-alert").show()}},set:{title:function(a,b){a&&($j(".jmfe-title-large").html(a),b||(b=jmfe.values.meta_key),$j(".jmfe-title-small").html(b))},action:function(a){a&&($j(".jmfe-modal").data("action",a),jmfe.values.modal_action=a)}},get:{meta_key:function(){return $j("#field_meta_key").val()},action:function(){var a=$j(".jmfe-modal").data("action");return a&&jmfe.modal.set.action(a),jmfe.values.modal_action},all:function(){var a=jmfe.config.fields.all;$j.each(a,function(a,b){-1!==$j.inArray(b,jmfe.config.fields.checkboxes)?jmfe.modal.get.checkbox(b):jmfe.values[b]=$j(".jmfe-settings-config-content").find("#field_"+b).val()})},checkbox:function(a){$j("#field_"+a+"_0").prop("checked")?jmfe.values[a]=1:jmfe.values[a]=0}},loader:{show:function(){jmfe.modal.form.hide(),jmfe.modal.confirm.hide(),jmfe.modal.alert.hide(),jmfe.modal.buttons.hide.all(),$j(".jmfe-modal-spin-wrapper").fadeIn()},hide:function(){jmfe.modal.buttons.show.all(),$j(".jmfe-modal-spin-wrapper").hide(),jmfe.modal.form.show()}}},jmfe.settings={},jmfe.modal["new"]=function(){jmfe.modal.reset();var a=$j("#jmfe-table-title").val();jmfe.modal.set.action("new"),jmfe.modal.set.title(jmfe.locale.add_new_field,a),jmfe.modal.buttons.text.primary(jmfe.locale.add_new_field),jmfe.modal.tabs.nav.custom.check(),jmfe.modal.fields.output.as.checkbox.disable(),jmfe.modal.show()},jmfe.modal.edit=function(){jmfe.modal.reset(),jmfe.table.cache.values(),jmfe.modal.set.action("edit"),jmfe.modal.set.title(jmfe.locale.edit_field),jmfe.modal.fields.load(),jmfe.modal.buttons.text.primary(jmfe.locale.save_field),jmfe.modal.show()},jmfe.modal.view=function(){jmfe.modal.reset(),jmfe.table.cache.values(),jmfe.modal.set.action("view"),jmfe.modal.set.title(jmfe.locale.view_field),jmfe.modal.fields.load(),jmfe.modal.buttons.text.secondary(jmfe.locale.close),jmfe.modal.buttons.hide.primary(),jmfe.modal.alert.show("info",jmfe.locale.view_alert),jmfe.modal.fields.disable.all(),jmfe.modal.show()},jmfe.modal["delete"]=function(){jmfe.modal.reset(),jmfe.table.cache.values(),jmfe.modal.set.action("delete"),jmfe.modal.set.title(jmfe.locale.remove_field),jmfe.modal.confirm.content("<h2>"+jmfe.locale.ays_remove+" <code>"+jmfe.values.meta_key+"</code></h2>"),jmfe.modal.confirm.show(),jmfe.modal.show()},jmfe.modal.disable=function(a){var b="";if(jmfe.modal.reset(),jmfe.table.cache.values(),jmfe.modal.set.action(a),"enable"==a)var c=jmfe.locale.enable_field,d=jmfe.locale.ays_enable;if("disable"==a){var c=jmfe.locale.disable_field,d=jmfe.locale.ays_disable,e=jmfe.config.meta_keys[jmfe.values.meta_key];e&&e.disable_field_notice&&(b="<strong><em>"+e.disable_field_notice+"</em></strong>",jmfe.modal.confirm.enable_alert())}jmfe.modal.set.title(c),jmfe.modal.confirm.content("<h2>"+d+" <code>"+jmfe.values.meta_key+"</code></h2>"),b&&jmfe.modal.confirm.content(b),jmfe.modal.confirm.show(),jmfe.modal.show()},jmfe.modal.buttons={hero:{enable:function(){jmfe.modal.buttons.primary().addClass("button-hero"),jmfe.modal.buttons.secondary().addClass("button-hero")},disable:function(){jmfe.modal.buttons.primary().removeClass("button-hero"),jmfe.modal.buttons.secondary().removeClass("button-hero")}},show:{primary:function(){jmfe.modal.buttons.primary().show()},secondary:function(){jmfe.modal.buttons.secondary().show()},all:function(){jmfe.modal.buttons.show.primary(),jmfe.modal.buttons.show.secondary()}},hide:{primary:function(){jmfe.modal.buttons.primary().hide()},secondary:function(){jmfe.modal.buttons.secondary().hide()},all:function(){jmfe.modal.buttons.hide.primary(),jmfe.modal.buttons.hide.secondary()}},primary:function(){return $j(".jmfe-primary-button")},secondary:function(){return $j(".jmfe-secondary-button")},reset:function(){jmfe.modal.buttons.hero.disable(),jmfe.modal.buttons.show.all(),jmfe.modal.buttons.text.secondary(jmfe.locale.cancel)},text:{primary:function(a){jmfe.modal.buttons.primary().html(a)},secondary:function(a){jmfe.modal.buttons.secondary().html(a)}},disable:{primary:function(){$j("#jmfe-save-field").prop("disabled",!0)}},enable:{primary:function(){$j("#jmfe-save-field").prop("disabled",!1)}}},jmfe.modal.checkboxes={checked:function(a){var b=jmfe.config.checkbox.checked;b[a]&&(jmfe.modal.checkboxes.show(b[a]),jmfe.modal.checkboxes.hide(b[a]))},unchecked:function(a){var b=jmfe.config.checkbox.unchecked;b[a]&&(jmfe.modal.checkboxes.show(b[a]),jmfe.modal.checkboxes.hide(b[a]))},show:function(a){a.show&&$j.each(a.show,function(a,b){jmfe.modal.fields.show(b)})},hide:function(a){a.hide&&$j.each(a.hide,function(a,b){jmfe.modal.fields.hide(b)})},check:function(a){$j("#field_"+a+"_0").is(":checked")?jmfe.modal.checkboxes.checked(a):jmfe.modal.checkboxes.unchecked(a)},load:{check:function(){$j.each(jmfe.config.fields.checkboxes,function(a,b){return $j.inArray(b,jmfe.config.fields.output)>-1?!0:void jmfe.modal.checkboxes.check(b)})}},output_as:{check:function(a){$j("#field_output").length&&"none"!==$j("#field_output").prop("value")&&jmfe.modal.checkboxes.check(a)},change:function(){$j("#jmfe-output-form :checkbox").each(function(a,b){var c=$j(this).prop("name");jmfe.modal.checkboxes.check(c)})}}},jmfe.modal.fields={show:function(a){a||$j(".jmfe-modal-fields-config").show(),$j("#jmfe-modal-field_"+a+"-tr").show()},hide:function(a){a||$j(".jmfe-modal-field").hide(),$j("#jmfe-modal-field_"+a+"-tr").hide()},reset:function(a,b,c){jmfe.modal.fields.show(),jmfe.modal.fields.show("show_in_rest"),jmfe.modal.fields.enable.all(a),$j("#jmfe-modal-field_taxonomy-tr .description").html('<a target="_blank" href="http://codex.wordpress.org/Taxonomies">WordPress Taxonomy</a>'),jmfe.modal.fields.options.setLabels(),$j("#jmfe-modal-unknown-field_type").html(),$j("#field_type").removeData("unknown"),$j("#jmfe-modal-unknown-field_type").hide(),$j("#field_type").show(),$j.each(jmfe.config.fields.hidden,function(a,b){jmfe.modal.fields.hide(b)}),jmfe.modal.fields.output.reset(),jmfe.modal.fields.options.reset(c),jmfe.modal.fields.packages.reset()},clear:function(){jmfe.values={},$j(".jmfe-settings-config-content input, select").removeClass("jmfe-field-invalid"),$j(".jmfe-settings-config-content input:not(:checkbox), textarea").val(""),$j('.jmfe-settings-config-content #field_type option[value="none"]').prop("selected",!0),$j('.jmfe-settings-config-content #field_output option[value="none"]').prop("selected",!0),$j('#field_output_as option[value="text"]').prop("selected",!0),$j.each(jmfe.config.fields.checkboxes,function(a,b){$j("#field_"+b+"_0").prop("checked",!1)}),$j(".jmfe-conf-hidden-field").remove()},disable:{all:function(){$j(".jmfe-modal-table input, select, textarea").each(function(){$j(this).prop("disabled",!0)})}},enable:{all:function(a){var b=".jmfe-modal-table input, select, textarea";a||(b+=", option"),$j(b).each(function(){$j(this).prop("disabled",!1)}),$j("#field_type option:first").prop("disabled",!0),$j("option.disabled").prop("disabled",!0)}}},jmfe.modal.fields.check=function(){var a=["enable","disable","delete"];if(-1!==$j.inArray(jmfe.modal.get.action(),a))return!0;jmfe.modal.get.all();var b,c=jmfe.config.meta_keys[jmfe.values.meta_key],d=jmfe.config.fields.required;jmfe.config.types[jmfe.values.type]&&jmfe.config.types[jmfe.values.type].required&&(d=$j.merge($j.merge([],d),jmfe.config.types[jmfe.values.type].required));var e=$j("#field_type").data("unknown");return e&&(jmfe.values.type=$j("#jmfe-modal-unknown-field_type").html()),$j.each(d,function(a,d){return c&&c.not_required&&-1!==$j.inArray(d,c.not_required)?!0:"options"===d?jmfe.modal.fields.options.check()?!0:(jmfe.modal.alert.show("danger",jmfe.locale.options_required),jmfe.modal.tabs.show("options"),b=!0,!1):jmfe.values[d]?void 0:(jmfe.modal.alert.show("danger",jmfe.locale.field_required,"#field_"+d),b=!0,!1)}),$j.each(jmfe.config.fields.noSpaces,function(a,c){return jmfe.values[c].indexOf(" ")>=0?(jmfe.modal.alert.show("danger",jmfe.locale.no_spaces,"#field_"+c),b=!0,!1):void 0}),$j.each(jmfe.config.fields.onlyNum,function(a,c){return isFinite(String(jmfe.values[c]))?void 0:(jmfe.modal.alert.show("danger",jmfe.locale.only_num,"#field_"+c),b=!0,!1)}),0==/^[a-z0-9_]*$/.test(jmfe.values.meta_key)?(jmfe.modal.alert.show("danger",jmfe.locale.meta_key_chars,"#field_meta_key"),b=!0,!1):(jmfe.values.priority||(jmfe.values.priority=2),b?!1:!0)},jmfe.modal.fields.load=function(){return jmfe.values?(jmfe.values.type&&(jmfe.modal.type.changed(jmfe.values.type),jmfe.modal.type.check(jmfe.values.type)),$j.each(jmfe.values,function(a,b){if("type"!=a)if("output"==a)jmfe.modal.fields.output.load(b);else if("options"==a)jmfe.modal.fields.options.load(b);else if("packages_show"==a)jmfe.modal.fields.packages.load(b);else if("output_multiple"==a)jmfe.modal.fields.output.multiple.load(b);else{$j.inArray(a,jmfe.config.fields.checkboxes)>-1&&(a+="_0");var c=$j(".jmfe-settings-config-content").find("#field_"+a);c.length&&("checkbox"===c.prop("type")&&(1===parseInt(b)&&c.prop("checked",!0).trigger("change"),0===parseInt(b)&&c.prop("checked",!1).trigger("change")),c.val(b))}}),jmfe.modal.tabs.nav.custom.check(),jmfe.modal.fields.metakey.doconfig(),void jmfe.modal.checkboxes.load.check()):!1},jmfe.modal.fields.metakey={doconfig:function(a){a||(a=$j("#field_meta_key").val());var b=jmfe.config.meta_keys[a],c=jmfe.config.fields.taxonomies,d=jmfe.modal.fields;b&&(b.hidden_input&&$j.each(b.hidden_input,function(a,b){if("number"==typeof a&&(a=b,b=$j("#field_"+a).prop("value")),$j("#field_"+a+"_hidden").length)return!0;var c=$j("#field_"+a).prop("name"),d='<input id="field_'+a+'_hidden" class="jmfe-conf-hidden-field" type="hidden" name="'+c+'" value="'+b+'" />';$j("#field_"+a).parent().append(d)}),b.disable_fields&&$j.each(b.disable_fields,function(a,b){$j("#field_"+b).prop("disabled",!0)}),b.hidden_fields&&$j.each(b.hidden_fields,function(a,b){d.hide(b)}),b.hidden_tabs&&$j.each(b.hidden_tabs,function(a,b){jmfe.modal.tabs.nav.hide(b)}),b.disable_types&&$j.each(b.disable_types,function(a,c){return b.type_disabled_by&&jmfe.values.type==c&&-1!==$j.inArray(c,b.type_disabled_by)?($j("#field_type").prop("disabled",!0),!1):void $j("#field_type option[value="+c+"]").prop("disabled",!0)}),$j.inArray(a,c)>-1&&jmfe.modal.taxonomy.show.edit_url(b.taxonomy))}},jmfe.modal.fields.options={check:function(){var a;return 0==$j("#jmfe-options-form table").length?(a=!0,$j(".jmfe-field-add-group-row-button").click(),!1):($j("input[name*='options[option_value]']").each(function(b,c){if(a)return!1;var d=$j(this).val(),e=($j(this).prop("id"),!1);if(0==b&&!d){var f=$j("input[name='options[option_label][0]']").val(),g=$j("input[name='options[option_default][0]']").is(":checked"),h=$j("input[name='options[option_disabled][0]']").is(":checked");if(!(f&&g&&h))return a=!0,!1;e=!0,$j("input[name='options[option_value][0]']").val(" ")}a||d||e||$j(this).closest("table").remove()}),a?!1:!0)},type:function(a){if(!a)var a=jmfe.config.types[jmfe.values.type];a&&(a.option_label&&$j("label[for^='field_'][for$='option_label']").html(a.option_label),a.option_value&&$j("label[for^='field_'][for$='option_value']").html(a.option_value),a.option_ph_label&&$j("input[name*='options[option_label]']").prop("placeholder",a.option_ph_label),a.option_ph_value&&$j("input[name*='options[option_value]']").prop("placeholder",a.option_ph_value),a.option_hide&&($j.inArray("option_default",a.option_hide)>-1&&$j(".jmfe-modal-fields-options-option_default").hide(),$j.inArray("option_disabled",a.option_hide)>-1&&$j(".jmfe-modal-fields-options-option_disabled").hide()))},setLabels:function(a){if(!a)var a=jmfe.config.types[jmfe.values.type];var b="Label",c="Value",d="Default",e="Disabled";jmfelocale&&(jmfe.locale.options_label&&(b=jmfelocale.options_label.select),jmfe.locale.options_value&&(c=jmfelocale.options_value.select),jmfe.locale.options_default_label&&(d=jmfelocale.options_default_label),jmfe.locale.options_disabled_label&&(e=jmfelocale.options_disabled_label)),a&&(a.option_label&&(b=a.option_label),a.option_value&&(c=a.option_value)),$j("label[for^='field_'][for$='option_label']").html(b),$j("label[for^='field_'][for$='option_value']").html(c),$j("label[for^='field_'][for$='option_disabled']").html(e),$j("label[for^='field_'][for$='option_default']").html(d)},reset:function(a){var b=["select","multiselect","radio","checklist"];jmfe.values.type&&a&&$j.inArray(jmfe.values.type,b)>-1&&$j.inArray(a,b)>-1||(jmfe.modal.fields.options.sortDestroy(),$j("#jmfe-options-form table").remove(),$j(".jmfe-modal-fields-options").show())},template:function(a){var b=jmfe.config.types[jmfe.values.type],c="",d="",e="Label",f="Value",g="Default",h="Disabled";jmfelocale&&(jmfe.locale.options_label&&(e=jmfelocale.options_label.select),jmfe.locale.options_value&&(f=jmfelocale.options_value.select),jmfe.locale.options_default_label&&(g=jmfelocale.options_default_label),jmfe.locale.options_disabled_label&&(h=jmfelocale.options_disabled_label)),b&&(b.option_hide&&($j.inArray("option_default",b.option_hide)>-1&&(c="display: none;"),$j.inArray("option_disabled",b.option_hide)>-1&&(d="display: none;")),b.option_label&&(e=b.option_label),b.option_value&&(f=b.option_value));var i=$j("#group-options-tmpl").html().replace(/{{id}}/g,a),i=i.replace(/{{label_option_value}}/g,f),i=i.replace(/{{label_option_label}}/g,e),i=i.replace(/{{label_option_default}}/g,g),i=i.replace(/{{label_option_disabled}}/g,h),i=i.replace(/{{style_option_default}}/g,c),i=i.replace(/{{style_option_disabled}}/g,d),j={rowid:a,template:i};return j},load:function(a){if("products"!==jmfe.values.meta_key||"listify"!==jmfe.locale.theme_name){$j("#jmfe-options-form table").remove();for(var b=jmfe.modal.fields.options.convert(a),c=0;c<b.length;c++){var d=jmfe.modal.fields.options.template(c),e=c,f=d.template;f=f.replace(/\_\_count\_\_/g,c),$j("#jmfe-options-form").append(f),$j("#field_"+e+"_option_label").val(b[c].caption),$j("#field_"+e+"_option_value").val(b[c].value),b[c].disabled&&$j("#field_"+e+"_option_disabled_0").prop("checked",!0),b[c]["default"]&&$j("#field_"+e+"_option_default_0").prop("checked",!0)}jmfe.modal.fields.options.sortCreate()}},convert:function(a){var b=(a.split(","),[]),c=a.replace(/([^\\]),/g,"$1").split("");return $j.each(c,function(a,c){var d={};if(c.indexOf("*")>=0&&(c=c.replace("*",""),d["default"]=1),c.indexOf("~")>=0&&(c=c.replace("~",""),d.disabled=1),c.indexOf("||")>=0){var e=c.split("||");d.value=e[0].replace(/\\/g,""),d.caption=e[1].replace(/\\/g,"")}else c=c.replace(/\\/g,""),d.value=c,d.caption=c.toUpperCase();b.push(d)}),b},randomUUID:function(){for(var a=[],b=0;6>b;b++)a[b]=Math.floor(16*Math.random());return a.join("")},reIndex:function(){$j(".options-groupitems").each(function(a){$j(this).find("[name^='options[']").each(function(b){var c=$j(this).prop("name");if(c){var d=c.replace(/\[\d+]/,"["+a+"]");$j(this).prop("name",d)}})})},sortCreate:function(){jmfe.modal.fields.options.sortDestroy().sortable({animation:150,handle:".jmfe-modal-options-handle",onEnd:function(a){jmfe.modal.fields.options.reIndex()}})},sortDestroy:function(){return $j("#jmfe-options-form").sortable("destroy")}},jmfe.modal.fields.output={show:function(a){jmfe.modal.tabs.nav.show("output"),$j("#jmfe-modal-field_output-tr").show(),a&&jmfe.modal.fields.output.as.show()},reset:function(){$j('#field_output option[value="none"]').prop("selected",!0),jmfe.modal.fields.output.as.hide()},load:function(a){var b=(jmfe.values.origin,jmfe.values.output),c=jmfe.values.output_as;if(jmfe.modal.tabs.nav.custom.check(),b){var d=$j('#field_output option[value="'+b+'"]').length,e=$j('#field_output_as option[value="'+c+'"]').length;d>0&&(jmfe.modal.fields.output.show(),$j('#field_output option[value="'+b+'"]').prop("selected",!0),e>0&&"none"!=b&&(jmfe.modal.fields.output.as.show(),$j('#field_output_as option[value="'+c+'"]').prop("selected",!0),
jmfe.modal.fields.output.as.change(c)),jmfe.modal.fields.output.multiple.init(b))}},change:function(a){if(a||(a=$j("#field_output").val()),"none"===a)jmfe.modal.fields.output.multiple.reset(),jmfe.modal.fields.output.as.hide();else{var b=$j("#field_output_as").val();$j("#jmfe-modal-field_output_as-tr").show(),jmfe.modal.fields.output.multiple.init(a),jmfe.modal.fields.output.as.change(b)}},multiple:{reset:function(){$j("#field_output_multiple option").prop("disabled",!1),$j("#field_output_multiple option").prop("selected",!1)},load:function(a){a=a.toString(),a.indexOf(",")>=0?(a=a.split(","),$j.each(a,function(a,b){$j('#field_output_multiple option[value="'+b+'"]').prop("selected","selected")})):a&&$j('#field_output_multiple option[value="'+a+'"]').prop("selected","selected")},init:function(a){$j('#field_output_multiple option[value="'+a+'"]').prop("disabled","disabled"),$j.isFunction($j.fn.select2)?$j("#field_output_multiple").select2({dropdownParent:$j("#jmfe-output-form"),debug:!0,width:"100%"}):$j.isFunction($j.fn.chosen)&&$j("#field_output_multiple").chosen({search_contains:!0,width:"100%"})}}},jmfe.modal.fields.output.as={hide:function(){$j.each(jmfe.config.fields.output,function(a,b){"output"!=b&&$j("#jmfe-modal-field_"+b+"-tr").hide()})},show:function(){$j("#jmfe-modal-field_output_as-tr").show()},check:function(a){a||(a=$j("#field_type").val()),jmfe.modal.fields.output.as.checkbox.check(a),jmfe.modal.fields.output.as.calendar.check(a)},change:function(a){var b=jmfe.config.outputs[a];$j.each(jmfe.config.outputs.all.enable_fields,function(a,b){jmfe.modal.fields.show(b)}),$j.each(jmfe.config.outputs.all.disable_fields,function(a,b){jmfe.modal.fields.hide(b)}),b&&b.enable_fields&&$j.each(b.enable_fields,function(a,b){jmfe.modal.fields.show(b)}),jmfe.modal.checkboxes.output_as.change(),jmfe.modal.fields.output.as.check()},checkbox:{disable:function(){$j('#field_output_as option[value="checklabel"]').prop("disabled",!0),$j('#field_output_as option[value="checkcustom"]').prop("disabled",!0)},enable:function(){$j('#field_output_as option[value="checklabel"]').prop("disabled",!1),$j('#field_output_as option[value="checkcustom"]').prop("disabled",!1)},check:function(a){a||(a=$j("#field_type").val()),"checkbox"===a?jmfe.modal.fields.output.as.checkbox.enable():jmfe.modal.fields.output.as.checkbox.disable()}},calendar:{disable:function(){$j('#field_output_as option[value="fpcalendar"]').prop("disabled",!0)},enable:function(){$j('#field_output_as option[value="fpcalendar"]').prop("disabled",!1)},check:function(a){a||(a=$j("#field_type").val()),"fpdate"===a?jmfe.modal.fields.output.as.calendar.enable():jmfe.modal.fields.output.as.calendar.disable()}}},jmfe.modal.fields.packages={load:function(a){a=a.toString(),a.indexOf(",")>=0?(a=a.split(","),$j.each(a,function(a,b){$j("#jmfe-modal-field_packages_show-tr input[value='"+b+"']").prop("checked",!0)})):$j("#jmfe-modal-field_packages_show-tr input[value='"+a+"']").prop("checked",!0)},reset:function(){$j("input[name*='packages_show[0]']").prop("checked",!1)}},jmfe.modal.save=function(){jmfe.modal.wp_nonce="SqMc4AAk3we1whb5wS0OgAEE";var a,b="",c=jmfe.modal.get.action();jmfe.values||jmfe.modal.fields.check();var d=$j("#jmfe-modal-form").serialize(),e=$j("#current-page-selector").val();if(a={modal_action:c,action:"jmfe_save_field",nonce:$j("#jmfe_save_field").val(),field_group:jmfe.table.field_group,field_group_parent:jmfe.table.field_group_parent,filter:jmfe.table.filter,post_id:jmfe.values.post_id,meta_key:jmfe.values.meta_key,type:jmfe.values.type,post_type:$j("#jmfe-post_type").val()},$j("#field_required_0").is(":disabled")&&(a.required=$j("#field_required_0").val()),e&&(a.paged=e),d+="&"+$j.param(a),"disable"===c||"enable"===c){var d=jmfe.values;d.action="jmfe_save_field",d.nonce=$j("#jmfe_save_field").val(),d.field_group=jmfe.table.field_group,d.field_group_parent=jmfe.table.field_group_parent,d.filter=jmfe.table.filter,e&&(d.paged=e)}$j.ajax(ajaxurl,{type:"POST",dataType:"JSON",data:d,beforeSend:function(){jmfe.modal.loader.show()},error:function(a,b,c){var d;if(a.responseText){d=a.responseText;var e=$j(".xdebug-error th:first",a.responseText).html();e&&(d=e)}else d=jmfe.locale.error+"! "+c;jmfe.table.alert.show("error",d+"<br/>"+jmfe.locale.error_submit_ticket)},success:function(a){"0"===a?jmfe.table.alert.show("error",jmfe.locale.unknown_error):jmfe.table.alert.show(a.status,a.message),"disable"==c&&(b="error"),("enable"==c||"add"==c||"edit"==c&&"error"!=a.status)&&(b="updated"),"error"==a.status&&(b="error"),a.body&&(jmfe.table.loader.show(),$j("#jmfe-form-wrap").html(a.body),jmfe.table.loader.hide(),jmfe.callbacks.list($j))},complete:function(){jmfe.modal.loader.hide(),jmfe.modal.hide();var a=$j(".jmfe-row-"+jmfe.values.meta_key);a&&b&&jmfe.table.flash(a,b)}})},jmfe.modal.tabs={show:function(a){if($j("#jmfe-modal-tab-content .group").hide(),$j("#jmfe-tab-"+a+"-group").show(),$j(".jmfe-modal-config-nav li").removeClass("current"),$j("#jmfe-tab-"+a+"-li").addClass("current"),"populate"==a){var b=$j("#field_meta_key").val(),c=$j("#field_populate_meta_key").val();b&&!c&&$j("#field_populate_meta_key").val("_"+b)}},reset:function(){$j(".jmfe-tab-content-group").show(),$j(".jmfe-tab-nav").show(),$j.each(jmfe.config.tabs.hidden,function(a,b){$j("#jmfe-tab-"+b).hide()}),jmfe.modal.tabs.select_first()},select_first:function(){$j(".jmfe-modal-config-nav li:first a").click()},nav:{hide:function(a){$j("#jmfe-tab-"+a).hide(),jmfe.modal.tabs.select_first()},show:function(a){$j("#jmfe-tab-"+a).show(),jmfe.modal.tabs.select_first()},custom:{show:function(){var a=jmfe.values.type?jmfe.config.types[jmfe.values.type]:!1;$j.each(jmfe.config.tabs.custom,function(b,c){a&&a.hide_tabs&&a.hide_tabs.indexOf(c)>-1?$j("#jmfe-tab-"+c).hide():$j("#jmfe-tab-"+c).show()})},hide:function(){$j.each(jmfe.config.tabs.custom,function(a,b){return"output"===b&&jmfe.phpconf&&jmfe.phpconf.output_all_origin&&jmfe.phpconf.output_all_origin>0?($j("#jmfe-tab-output").show(),!0):void $j("#jmfe-tab-"+b).hide()})},check:function(){var a=jmfe.values.origin,b=jmfe.modal.get.action(),c=jmfe.modal.get.meta_key(),d=jmfe.config.meta_keys[c];"custom"===a||"new"===b?jmfe.modal.tabs.nav.custom.show():jmfe.modal.tabs.nav.custom.hide(),d&&d.hidden_tabs&&$j.inArray("packages",d.hidden_tabs)>-1&&jmfe.modal.tabs.nav.hide("packages")}}}},jmfe.modal.taxonomy={set:{edit_url:function(a){$j("#jmfe-modal-field_taxonomy-tr .description").html('<a target="_blank" href="edit-tags.php?taxonomy='+a+'">'+jmfe.locale.tax_options_edit+"</a>")}},show:{edit_url:function(a){a&&jmfe.modal.taxonomy.set.edit_url(a)}}},jmfe.modal.type={check:function(a){a||(a=jmfe.values.type),a||(jmfe.values.type="Unknown");var b=$j('.jmfe-settings-config-content #field_type option[value="'+a+'"]').length;b>0?($j("#jmfe-modal-unknown-field_type").hide(),$j(".jmfe-settings-config-content #field_type").show(),$j("#field_type").removeData("unknown"),$j('.jmfe-settings-config-content #field_type option[value="'+a+'"]').prop("selected",!0)):($j("#field_type").data("unknown","true"),$j(".jmfe-settings-config-content #field_type").hide(),$j("#jmfe-modal-unknown-field_type").html(a).show())},changed:function(a){if(jmfe.modal.fields.reset(!0,!0,a),jmfe.modal.tabs.reset(),jmfe.modal.tabs.nav.custom.check(),jmfe.modal.fields.output.as.check(),a&&jmfe.config.types[a]){jmfe.values.type=a;var b=jmfe.config.types[a],c=jmfe.modal.fields,d=jmfe.values.meta_key,e=jmfe.values.taxonomy,f=jmfe.config.meta_keys[d],g=jmfe.config.fields.taxonomies;if(b.hide&&$j.each(b.hide,function(a,b){c.hide(b)}),b.show&&$j.each(b.show,function(a,b){c.show(b)}),b.show_tabs&&$j.each(b.show_tabs,function(a,b){jmfe.modal.tabs.nav.show(b)}),b.hide_tabs&&$j.each(b.hide_tabs,function(a,b){jmfe.modal.tabs.nav.hide(b)}),e)if($j.inArray(d,g)>-1)jmfe.modal.taxonomy.show.edit_url(f.taxonomy);else{if("select"==a)return;jmfe.modal.taxonomy.show.edit_url(e)}var h=$j("#field_output").val();jmfe.modal.fields.output.change(h),jmfe.modal.fields.options.type(b),jmfe.modal.fields.metakey.doconfig()}}},jmfe.table.list.filter=function(a,b,c){jmfe.table.cache.table();var d=c||{};d.action="jmfe_list_filter",d.nonce=$j("#jmfe_list_filter").val(),d.per_page=$j(".screen-per-page").val(),d.post_type=$j("#jmfe-post_type").val(),d.field_group=jmfe.table.field_group,d.field_group_parent=jmfe.table.field_group_parent,d.filter=a||jmfe.table.filter,b&&(d.paged=jmfe.__query(b,"paged")||"1",d.order=jmfe.__query(b,"order")||"asc",d.orderby=jmfe.__query(b,"orderby")||"priority"),$j.ajax(ajaxurl,{type:"POST",dataType:"JSON",data:d,beforeSend:function(){jmfe.table.alert.hide(),jmfe.table.loader.show()},error:function(a,b,c){var d;if(a.responseText){d=a.responseText;var e=$j(".xdebug-error th:first",a.responseText).html();e&&(d=e)}else d=jmfe.locale.error+"! "+c;jmfe.table.alert.show("error",d+"<br/>"+jmfe.locale.error_submit_ticket)},success:function(a){"0"===a?jmfe.table.alert.show("error",jmfe.locale.unknown_error):null===a.body?jmfe.table.alert.show("error",jmfe.locale.unknown_error):a.body&&($j("#jmfe-form-wrap").html(a.body),jmfe.callbacks.list($j))},complete:function(){jmfe.table.loader.hide()}})};